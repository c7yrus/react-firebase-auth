(this["webpackJsonpreact-firebase-auth"]=this["webpackJsonpreact-firebase-auth"]||[]).push([[0],{53:function(e,t,a){e.exports=a(80)},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),i=a(24),u=a(107),l=a(19),s=a.n(l),p=a(28),m=a(103),h=a(34);h.initializeApp({apiKey:"AIzaSyCArYkJKKbQe20Y5-vk7pg3uBFupTom490",authDomain:"react-firebase-auth-4c729.firebaseapp.com",databaseURL:"https://react-firebase-auth-4c729.firebaseio.com",projectId:"react-firebase-auth-4c729",storageBucket:"react-firebase-auth-4c729.appspot.com",messagingSenderId:"959197836531",appId:"1:959197836531:web:ba1f0fdbe3a28a11353386",measurementId:"G-2WYZ2T8DG3"});var f=h,d=h.auth();function b(){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(s.a.mark((function e(){var t,a=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"google.com",e.abrupt("return",new Promise((function(e,a){var n=new f.auth.OAuthProvider(t);n?d.currentUser?a():d.signInWithPopup(n).then((function(t){var a=t.user;console.log({user:a});var n={displayName:a.displayName,email:a.email,photoURL:a.photoURL};E(n),e(n)})).catch((function(e){console.log({err:e}),a(e)})):a()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.firestore(),n=a.collection("users"),e.prev=2,e.next=5,n.add(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("User not added to collection");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var O=r.a.createContext(),j=r.a.createContext();var y=function(){var e=Object(n.useContext)(j),t=Object(n.useContext)(O).isLoading,a=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1];return d.onAuthStateChanged((function(e){e&&r(!0)})),a}(),o=function(){d.signOut().then((function(){return e({type:"USER_LOGOUT"})})).catch((function(e){return alert(e)}))},c=function(){var t=Object(p.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"USER_LOGIN_REQUEST"}),b(a).then((function(t){e({type:"USER_LOGIN_SUCCESS",payload:t})})).catch((function(t){return e({type:"USER_LOGIN_FAILURE",payload:t})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(m.a,{color:"primary",variant:"outlined",onClick:function(e){a?o():c("google.com")}},a?"Logout":t?"Logging in...":"Login with Google"),r.a.createElement(m.a,{color:"primary",variant:"contained",onClick:function(e){a?o():c("facebook.com")}},a?"Logout":t?"Logging in...":"Login with Facebook"))},L=a(106),R=a(48),U=a.n(R),S=a(47),w=a.n(S),C=a(110),_=a(109),k=a(105);var I=function(){var e=Object(n.useContext)(O),t=e.user,a=e.isLoading;return r.a.createElement("div",null,r.a.createElement(C.a,{avatar:a?r.a.createElement(k.a,{animation:"pulse",variant:"circle",width:40,height:40}):r.a.createElement(_.a,{src:t&&t.photoURL},r.a.createElement(w.a,null)),action:r.a.createElement(L.a,{"aria-label":"settings"},r.a.createElement(U.a,null)),title:a?r.a.createElement(k.a,{animation:"wave",height:10,width:"20%",style:{marginBottom:6}}):t&&t.displayName?t.displayName:"Full Name",subheader:a?r.a.createElement(k.a,{animation:"wave",height:10,width:"10%"}):t&&t.email?t.email:"Email"}))},N=a(14),G={isLoading:!1,error:null,user:null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(console.log({type:a}),console.log({payload:n}),a){case"USER_LOGIN_REQUEST":return Object(N.a)(Object(N.a)({},e),{},{isLoading:!0});case"USER_LOGIN_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{user:n,isLoading:!1});case"USER_LOGIN_FAILURE":return Object(N.a)(Object(N.a)({},e),{},{error:n,isLoading:!1});case"USER_LOGOUT":return Object(N.a)(Object(N.a)({},e),{},{user:null});case"GET_CURRENT_USER":return Object(N.a)(Object(N.a)({},e),{},{user:n});case"CLEAR_ERROR":return Object(N.a)(Object(N.a)({},e),{},{error:null});default:return e}},T=a(108),A=a(111);var B=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(O).error;return Object(n.useEffect)((function(){null!=c&&o(!0)}),[c]),r.a.createElement(T.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:A.a,open:a,onClose:function(){return o(!1)},autoHideDuration:4e3,message:c&&c.message})};var F=function(){var e=Object(n.useReducer)(x,G),t=Object(i.a)(e,2),a=t[0],o=t[1],c=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){return d.onAuthStateChanged((function(e){if(e){var t={displayName:e.displayName,email:e.email,photoURL:e.photoURL};console.log({person:t}),r(t)}}))}),[]),a}();return Object(n.useEffect)((function(){console.log({user:c}),o({type:"GET_CURRENT_USER",payload:c})}),[c]),r.a.createElement(O.Provider,{value:a},r.a.createElement(j.Provider,{value:o},r.a.createElement(u.a,null),r.a.createElement(I,null),r.a.createElement(B,null),r.a.createElement(y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.09fd37b4.chunk.js.map