(this["webpackJsonpreact-firebase-auth"]=this["webpackJsonpreact-firebase-auth"]||[]).push([[0],{5348:function(e,a,t){e.exports=t(5375)},5375:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),i=t.n(o),c=t(12),l=t(5421),s=r.a.createContext(),u=r.a.createContext(),m=t(18),p=t.n(m),d=t(29),E=t(75);E.initializeApp({apiKey:"AIzaSyCArYkJKKbQe20Y5-vk7pg3uBFupTom490",authDomain:"react-firebase-auth-4c729.firebaseapp.com",databaseURL:"https://react-firebase-auth-4c729.firebaseio.com",projectId:"react-firebase-auth-4c729",storageBucket:"react-firebase-auth-4c729.appspot.com",messagingSenderId:"959197836531",appId:"1:959197836531:web:ba1f0fdbe3a28a11353386",measurementId:"G-2WYZ2T8DG3"});var f=E,g=E.auth(),h=t(22),b=Object(h.a)();function v(){return(v=Object(d.a)(p.a.mark((function e(a){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.abrupt("return",new Promise((function(e,a){if(g.isSignInWithEmailLink(t)){var n=window.localStorage.getItem("emailForSignIn");n||(n=window.prompt("Please provide your email for confirmation")),g.signInWithEmailLink(n,t).then((function(a){console.log({result:a});var t=a.user,n={displayName:t.displayName,email:t.email,photoURL:t.photoURL};window.localStorage.removeItem("emailForSignIn"),b.push("/dashboard"),e(n)})).catch((function(e){console.log({err:e}),b.push("/"),a(e)}))}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark((function e(a){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.email,n=a.password,r=a.name,e.abrupt("return",new Promise((function(e,a){return t&&n?g.currentUser?a("A user is logged in. Please logout from dashboard first!"):void g.createUserWithEmailAndPassword(t,n).then((function(t){console.log({value:t});var n=t.user;if(n)if(n.uid){var o={email:n.email,photoURL:n.photoURL,displayName:n.displayName};r&&n.updateProfile({displayName:r}),e(o)}else a();else a()})).catch((function(e){console.log({err:e}),a(e)})):a("Email and password was not provided")})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(d.a)(p.a.mark((function e(a,t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return a&&t?g.currentUser?n("A user is logged in. Please logout from dashboard first!"):void g.signInWithEmailAndPassword(a,t).then((function(a){console.log({value:a});var t=a.user;if(t)if(t.uid){var r={displayName:t.displayName,email:t.email,photoURL:t.photoURL};e(r)}else n();else n()})).catch((function(e){console.log({err:e}),n(e)})):n("Email and password was not provided")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){if(a)if(g.currentUser)t("A user is currently logged in. Please logout first!");else{var n=window.location.href,r=n.slice(0,n.lastIndexOf("/")),o={url:"".concat(r,"/sign-in-with-email-link"),handleCodeInApp:!0};g.sendSignInLinkToEmail(a,o).then((function(){window.localStorage.setItem("emailForSignIn",a),e()})).catch((function(e){return t(e)}))}else t("Please provide a valid email address")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(p.a.mark((function e(){var a,t=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:"google.com",e.abrupt("return",new Promise((function(e,t){var n=new f.auth.OAuthProvider(a);n?g.currentUser?t("A user is already logged in. Please logout first to login with different email"):g.signInWithPopup(n).then((function(a){var t=a.user;console.log({user:t});var n={displayName:t.displayName,email:t.email,photoURL:t.photoURL};I(n),e(n)})).catch((function(e){console.log({err:e}),t(e)})):t()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark((function e(a){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.firestore(),n=t.collection("users"),e.prev=2,e.next=5,n.add(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("User not added to collection");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var C=t(15),R={isLoading:!1,error:null,user:null,authenticated:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(console.log({type:t}),console.log({payload:n}),t){case"USER_LOGIN_REQUEST":return Object(C.a)(Object(C.a)({},e),{},{isLoading:!0});case"USER_LOGIN_SUCCESS":return Object(C.a)(Object(C.a)({},e),{},{user:n,isLoading:!1,authenticated:!0});case"USER_LOGIN_FAILURE":return Object(C.a)(Object(C.a)({},e),{},{error:n,isLoading:!1});case"USER_LOGOUT":return Object(C.a)(Object(C.a)({},e),{},{user:null});case"GET_CURRENT_USER":return Object(C.a)(Object(C.a)({},e),{},{user:n,authenticated:!0});case"CLEAR_ERROR":return Object(C.a)(Object(C.a)({},e),{},{error:null});case"EMAIL_SENT":return Object(C.a)(Object(C.a)({},e),{},{isLoading:!1});case"SEND_EMAIL_LINK_REQUEST":return Object(C.a)(Object(C.a)({},e),{},{isLoading:!0});case"SEND_EMAIL_LINK_SUCCESS":return Object(C.a)(Object(C.a)({},e),{},{isLoading:!1});case"SEND_EMAIL_LINK_FAILURE":return Object(C.a)(Object(C.a)({},e),{},{error:n,isLoading:!1});default:return e}},N=t(13),L=t(5427),U=t(5408),x=t(5422),T=t(5412),P=t(5424),k=t(5414),W=t(5423),D=t(72),F=t.n(D),G=t(51),B=t(5405),K=t(5410),M=function(e){return{type:"USER_LOGIN_SUCCESS",payload:e}},Q=function(e){return{type:"USER_LOGIN_FAILURE",payload:e&&e.message?e.message:e}},Y=t(70),q=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},social:{margin:e.spacing(2,0,0)}}}));var H=function(){var e=q(),a=Object(n.useContext)(u),t=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"USER_LOGIN_REQUEST"}),w(t).then((function(e){a(M(e)),b.push("/dashboard")})).catch((function(e){return a(Q(e))}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.paper},r.a.createElement(G.a,{component:"h1",variant:"body1"},"OR"),r.a.createElement(U.a,{fullWidth:!0,variant:"contained",color:"primary",style:{backgroundColor:"#4267B2"},className:e.social,onClick:function(){return t("facebook.com")},startIcon:r.a.createElement(Y.a,null)},"Sign in with Facebook"),r.a.createElement(U.a,{fullWidth:!0,variant:"contained",color:"default",style:{backgroundColor:"white"},className:e.social,onClick:function(){return t("google.com")},startIcon:r.a.createElement(Y.b,null)},"Sign in with Google"))},J=t(5409);function V(){return r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(J.a,{color:"inherit",href:"https://material-ui.com/"},"Expy")," ",(new Date).getFullYear(),".")}var z=t(27),Z=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function $(){var e=Z(),a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],i=t[1],l=Object(n.useState)(""),m=Object(c.a)(l,2),p=m[0],d=m[1],E=Object(n.useContext)(u),f=Object(n.useContext)(s).isLoading;return r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(L.a,{className:e.avatar},r.a.createElement(F.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),f||(E({type:"USER_LOGIN_REQUEST"}),function(e,a){return O.apply(this,arguments)}(o,p).then((function(e){console.log({user:e}),E(M(e)),b.push("/dashboard")})).catch((function(e){return E(Q(e))})))}},r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement(T.a,{control:r.a.createElement(P.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},f?"Signing In...":"Sign In"),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:!0},r.a.createElement(z.b,{to:"/forgot-password"},"Forgot password?")),r.a.createElement(k.a,{item:!0},r.a.createElement(z.b,{to:"/sign-up"},"Don't have an account? Sign Up"))))),r.a.createElement(H,null),r.a.createElement(U.a,{fullWidth:!0,variant:"contained",color:"secondary",className:e.submit,onClick:function(){return b.push("/send-sign-in-email-link")}},"Send Sign In Email Link"),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))}var X=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ee(){var e=X(),a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],i=t[1],l=Object(n.useState)(""),m=Object(c.a)(l,2),p=m[0],d=m[1],E=Object(n.useState)(""),f=Object(c.a)(E,2),g=f[0],h=f[1],v=Object(n.useContext)(u),O=Object(n.useContext)(s).isLoading,y={name:o,email:p,password:g};return r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(L.a,{className:e.avatar},r.a.createElement(F.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),O||(v({type:"USER_LOGIN_REQUEST"}),function(e){return S.apply(this,arguments)}(y).then((function(e){v(M(e)),b.push("/dashboard")})).catch((function(e){return v(Q(e))})))}},r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Full name",name:"name",autoComplete:"name",autoFocus:!0,value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:g,onChange:function(e){return h(e.target.value)}}),r.a.createElement(T.a,{control:r.a.createElement(P.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},O?"Signing up...":"Sign Up"),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0},r.a.createElement(z.b,{to:"/sign-in"},"Already have an account? Sign in"))))),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))}var ae=t(92),te=t.n(ae),ne=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function re(){var e=ne();return r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(L.a,{className:e.avatar},r.a.createElement(te.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Forgot Password"),r.a.createElement("br",null),r.a.createElement(G.a,{component:"body1",variant:"body1",color:"textSecondary"},"Enter your email address and we'll send you a link to reset your password."),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),alert("Send reset password email here")}},"Send Email"))),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))}t(5415),t(5416),t(5413),t(93),t(5426);t(5417),t(5418),t(5419);var oe=t(74),ie=t.n(oe),ce=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function le(){var e=ce(),a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],i=t[1],l=Object(n.useContext)(u),m=Object(n.useContext)(s),p=m.isLoading,d=(m.error,window.location.href),E=Object(n.useState)(!1),f=Object(c.a)(E,2),h=f[0],b=f[1],S=Object(n.useState)(!0),O=Object(c.a)(S,2),y=O[0],w=O[1];console.log("holaaaaaaaa");return Object(n.useEffect)((function(){console.log("useEffect is happening......"),g.isSignInWithEmailLink(d)&&b(!0)}),[]),Object(n.useEffect)((function(){if(console.log({isRedirect:h}),h){var e=window.localStorage.getItem("emailForSignIn");e?i(e):w(!1),console.log({email:e})}}),[h]),r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(L.a,{className:e.avatar},r.a.createElement(ie.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Sign in With Email Link"),r.a.createElement("br",null),r.a.createElement(G.a,{component:"body1",variant:"body1",color:"textSecondary"},"Click the button to sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),l({type:"USER_LOGIN_REQUEST"}),function(e){return v.apply(this,arguments)}(o).then((function(e){return l(M(e))})).catch((function(e){return l(Q(e.message))}))}},r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,value:o,onChange:function(e){return i(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,disabled:!!y}),r.a.createElement(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},p?"Signing In...":"Sign In"))),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))}var se=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ue(){var e=se(),a=Object(n.useState)(""),t=Object(c.a)(a,2),o=t[0],i=t[1],l=Object(n.useContext)(u),m=Object(n.useContext)(s),p=m.isLoading,d=(m.error,Object(n.useState)(!1)),E=Object(c.a)(d,2),f=E[0],g=E[1];return r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(L.a,{className:e.avatar},r.a.createElement(ie.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Send Sign In Email Link"),r.a.createElement("br",null),r.a.createElement(G.a,{component:"body1",variant:"body1",color:"textSecondary"},"You will receive an email with an url to sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),f||p||(l({type:"SEND_EMAIL_LINK_REQUEST"}),function(e){return y.apply(this,arguments)}(o).then((function(){l({type:"SEND_EMAIL_LINK_SUCCESS"}),i(""),g(!0)})).catch((function(e){return l(function(e){return{type:"SEND_EMAIL_LINK_FAILURE",payload:e&&e.message?e.message:e}}(e))})))}},f?null:r.a.createElement(x.a,{variant:"outlined",margin:"normal",required:!0,value:o,onChange:function(e){return i(e.target.value)},fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},f?"Email Sent":p?"Sending Email...":"Send an Email"))),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))}var me=t(5425),pe=t(5420);var de=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],o=a[1],i=Object(n.useContext)(s).error;return Object(n.useEffect)((function(){null!=i&&o(!0)}),[i]),r.a.createElement(me.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:pe.a,open:t,onClose:function(){return o(!1)},autoHideDuration:5e3,message:i&&i})};var Ee=function(){var e=Object(n.useReducer)(A,R),a=Object(c.a)(e,2),t=a[0],o=a[1],i=function(){var e=Object(n.useState)(null),a=Object(c.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){return g.onAuthStateChanged((function(e){if(console.log("lets see how many times its called"),e){var a={displayName:e.displayName,email:e.email,photoURL:e.photoURL};console.log({person:a}),r(a)}}))}),[]),t}();return Object(n.useEffect)((function(){console.log({user:i}),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/react-firebase-auth",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCArYkJKKbQe20Y5-vk7pg3uBFupTom490",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-firebase-auth-4c729.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://react-firebase-auth-4c729.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"react-firebase-auth-4c729",REACT_APP_FIREBASE_STORAGE_BUCKET:"react-firebase-auth-4c729.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"959197836531",REACT_APP_FIREBASE_APP_ID:"1:959197836531:web:ba1f0fdbe3a28a11353386",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-2WYZ2T8DG3"}).REACT_APP_HOMEPAGE),o({type:"GET_CURRENT_USER",payload:i})}),[i]),console.log("/react-firebase-auth","PUBLIC_URL"),r.a.createElement(s.Provider,{value:t},r.a.createElement(u.Provider,{value:o},r.a.createElement(l.a,null),r.a.createElement(de,null),r.a.createElement(N.a,null,r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:"/",component:$}),r.a.createElement(N.a,{exact:!0,path:"/react-firebase-auth",component:$}),r.a.createElement(N.a,{exact:!0,path:"/sign-in",component:$}),r.a.createElement(N.a,{exact:!0,path:"/sign-up",component:ee}),r.a.createElement(N.a,{path:"/forgot-password",component:re}),r.a.createElement(N.a,{path:"/sign-in-with-email-link",component:le}),r.a.createElement(N.a,{path:"/send-sign-in-email-link",component:ue})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z.a,{history:b,basename:"/react-firebase-auth"},r.a.createElement(Ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[5348,1,2]]]);
//# sourceMappingURL=main.d3ac6bad.chunk.js.map